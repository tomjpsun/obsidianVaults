
# 工作進度
- PTP4L 開發環境
	- Build a working timestamp SYNC system (done)
	
+ IEEE 1588 support in DM9051 driver
	+ Intel IGB driver trace (pending)
	+ Study LinuxPTP driver related functions (10%)
	+ Study driver source from Stone (30%)
		+ fix compile error (add  include **linux/of.h** )
	+ Porting driver source form Joseph
		+ DM9051 掛上 (as eth1), dmesg 看到 IRQ 問題 (如後面 Note 1 : driver logs) 卸載 dm9051.ko 並且重新壓緊杜邦線接頭, 可以解決。爲了避免類似情形干擾, 已經改用比較穩定的接線方式 (10cm 杜邦線）
		+ 掛上數小時後，dmesg 無報錯訊息，但是無法使用，網路界面無法被其他機器 ping 到 (Pi 4 kernel: Linux raspberrypi 6.6.51+rpt-rpi-v8 )


# 預計工作項目

- PTP4L 開發環境
	- Build a working timestamp SYNC system (done)

+ IEEE 1588 support in DM9051 driver 
	+ Intel IGB driver trace
	+ Study LinuxPTP driver related functions
	+ Study driver source from Stone
	+ Study DM9051* spec. (1588 related registers)
	+ Porting driver source form Joseph
	
- 使用 PTP4L 測試
	- PTP4L 參數研究
	- 測試環境配置
		- 架設 1588 專用 LAN
		- 遠端操作環境
		- 定義測試項目
		- runtime 校正時間
		- 分析與修改
			- 調教結果
			- 開發分析工具
			- 最佳化調校

- ETD支援(待命)
	- 工溫測試
	- ETD 燒錄

# 已完成工作
- PTP4L 開發環境
	- Build a working timestamp SYNC system (2024/11/06)
	
- IEEE 1588 support in DM9051 driver 
	+ Intel IGB driver trace (待完成)
	+ Study LinuxPTP driver related functions (待完成)
	+ Study driver source from Stone
		+ fix compile error source from Stone (add  include **linux/of.h** ) （2024/11/13）
	+ Study 1588 related registers of DM9051* spec. (待完成)
	+ Porting driver source form Joseph
		+ Pi 4 接上 Davicom 開發板: DM9051 SPI 界面 (2024/10/14-18)
		- 掛上原始 DM9051 driver (2024/10/14-18) (11/06 杜邦線 導致 bug)
		-  DM9051 掛上 (as eth1), dmesg 看到 IRQ 問題 (如後面 Note 1 : driver logs) 卸載 dm9051.ko 並且重新壓緊杜邦線接頭, 可以解決。爲了避免類似情形干擾, 已經改用比較穩定的接線方式 (10cm 杜邦線）(2024/11/13)

- ETD支援
	- 工溫測試
		- 支援 8 片測試, 資料庫搬家 (移動到 /extra : 87G 空間) (2024/10/28)
	- ETD 燒錄
		- 修改 Product ID, Vendor ID 的 Endianess (2024/10/22 - 23)

# Appendix
> [!NOTE] Note 1 : driver logs
>
[94421.159849] dm9051 spi0.1 eth1: Link is Up - 100Mbps/Full - flow control rx/tx
[94421.167430] dm9051_irq_flag(db) 8
[94421.167450] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94421.175466] dm9051_irq_flag(db) 8
[94421.175494] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94421.183445] dm9051_irq_flag(db) 8
[94421.183462] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94456.153438] dm9051_irq_flag(db) 8
[94456.153467] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94670.315155] dm9051_irq_flag(db) 8
[94670.315187] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94677.155979] dm9051_irq_flag(db) 8
[94677.156004] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94693.603788] dm9051_irq_flag(db) 8
[94693.603816] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[94851.709652] dm9051_irq_flag(db) 8
[94851.709681] Set Reg, IRQF_TRIGGER_LOW 8, IRQF_TRIGGER_HIGH 4
[95572.032749] dm9051 spi0.1 eth1: Link is Down
[95572.033403] free_irq, irqno 55


